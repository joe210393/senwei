<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>最新消息</title>
  <link rel="stylesheet" href="/css/admin.css">
  <style>
    .toolbar { display:flex; flex-wrap:wrap; gap:6px; margin-bottom:8px; }
    .toolbar button { padding:6px 10px; }
    .editor { min-height: 320px; border:1px solid #e5e7eb; border-radius:10px; padding:12px; background:#fff; }
  </style>
  <script defer src="/js/admin.js"></script>
</head>
<body>
  <div id="admin-header"></div>
  <main class="admin-container container">
    <h1 class="mb-4">最新消息</h1>
    <div class="grid cols-2">
      <div class="card">
        <table id="news-table"><thead><tr><th>ID</th><th>Title</th><th>Slug</th><th>發佈</th><th>操作</th></tr></thead><tbody></tbody></table>
      </div>
      <div class="card">
        <h3>新增 / 編輯</h3>
        <form id="news-form" class="mt-2">
          <input type="hidden" name="id">
          <div><label>Title</label><input name="title" id="news-title" required></div>
          <div><label>Slug</label><input name="slug" id="news-slug" required></div>
          <div><label>摘要</label><textarea name="excerpt" id="news-excerpt" rows="3"></textarea></div>
          <div class="mt-2"><label>封面圖片</label>
            <div class="row">
              <input name="cover_media_id" id="news-cover" type="number" placeholder="Media ID" style="max-width:140px">
              <button type="button" class="ghost" id="news-cover-pick">選擇</button>
              <button type="button" class="ghost" id="news-cover-upload">上傳</button>
              <input type="file" id="news-cover-file" accept="image/*" hidden>
            </div>
          </div>
          <div class="mt-2"><label>內容 <span style="color:#ef4444;font-size:12px;">*必填</span></label>
            <div class="toolbar" id="news-toolbar">
              <button data-cmd="bold">粗體</button>
              <button data-cmd="italic">斜體</button>
              <button data-cmd="insertUnorderedList">項目符號</button>
              <button data-cmd="formatBlock" data-value="h2">H2</button>
              <button id="news-insert-img" class="ghost" type="button">插入圖片</button>
              <button id="news-upload-img" class="ghost" type="button">上傳圖片</button>
              <input type="file" id="news-insert-file" accept="image/*" hidden>
            </div>
            <div id="news-editor" class="editor" contenteditable="true" style="min-height:400px;border:2px solid #e5e7eb;border-radius:8px;padding:16px;background:#fff;" placeholder="請在此輸入文章內容..."></div>
            <div style="margin-top:8px;font-size:12px;color:#6b7280;">提示：可以直接貼上文字，或使用上方工具列進行格式化</div>
          </div>
          <div class="mt-2"><label>發佈時間</label><input type="datetime-local" name="published_at" id="news-published"></div>
          <div class="mt-2"><label><input type="checkbox" name="is_published" id="news-published-flag"> 發佈</label></div>
          <div class="mt-3"><button type="submit" id="news-save">儲存</button> <button type="button" id="news-delete" class="ghost">刪除</button></div>
        </form>
      </div>
    </div>

    <div id="news-picker" class="card mt-4" style="display:none">
      <div class="row" style="justify-content:space-between;align-items:center"><h3 class="mb-2">選擇封面圖片</h3><button class="ghost" id="news-picker-close">關閉</button></div>
      <div id="news-picker-grid" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px"></div>
      <div class="pager mt-3" id="news-picker-pager"></div>
    </div>
  </main>
</body>
</html>

